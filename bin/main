#!/usr/bin/env ruby
require_relative '../lib/application.rb'

app = Application.new

puts 'ğŸ“¦ Verifying bar codes input files'
bar_codes = app.read_input_csv
app.crawler_start(bar_codes)
puts "ğŸ‘€ #{bar_codes.length} bar code(s) detected"
puts 'âš¡ Started crawling'
puts "ğŸ Finished: #{app.crawled_counter} out of #{bar_codes.length} products crawled."
app.generate_output_csv(app.crawled_products)
puts 'ğŸ“‚ Generated output file at ("./output/products.csv")'
puts 'ğŸ“‹ Sucessful Crawls'
puts app.table_generator(app.crawled_products)
puts 'âŒ Crawling errors'
puts app.table_errors(app.crawler_errors)